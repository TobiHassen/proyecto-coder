var PerfitOptIn=PerfitOptIn||{};PerfitOptIn["ygpmFNI6"]=function(){var e,t,a,o,i,s,r,l="ygpmFNI6",n={"title":"SUSCRIBITE A NUESTRA VIP LIST","text":"","buttonText":"Suscribirme","footer":"Recibirás un correo para validar tu email.","redirect":"","successMessage":"¡Muchas gracias! Recuerda revisar tu casilla para confirmar la suscripción.","interestsText":"","config":"{\"styles\":{\"headerBackgroundColor\":\"#C9EEFA\",\"backgroundColor\":\"#222\",\"buttonBackgroundColor\":\"#ff4fa6\",\"headerTextColor\":\"#FFF\",\"buttonTextColor\":\"#FFF\",\"textColor\":\"#FFF\",\"textAlign\":\"center\",\"titleInBody\":true,\"maxWidth\":\"550px\"},\"layout\":\"inline\",\"fonts\":{\"text\":{\"family\":\"Montserrat\"},\"title\":{\"family\":\"Montserrat\"}}}","fields":[{"id":1,"displayName":"Nombre","format":"TEXT","required":true},{"id":3,"displayName":"Email","format":"EMAIL","required":true}],"interests":[]},d={es:{male:"Masculino",female:"Femenino",gender:"Género",language:"Idioma",submitError:"Ocurrió un error, por favor intenta nuevamente."},pt:{male:"Masculino",female:"Feminino",gender:"Género",language:"Língua",submitError:"Ocorreu um erro. Por favor, tente novamente."},en:{male:"Male",female:"Female",gender:"Gender",language:"Language",submitError:"An error occurred, please try again."}},p={es:{EMAIL:{regex:/^([a-zA-Z0-9_\.-]+)@([\da-zA-Z\.-]+)\.([a-zA-Z\.]{2,6})$/,message:"Ingresa una dirección de email válida."},URL:{regex:/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/,message:"Ingresa una URL válida."},DATE:{regex:/^(0[1-9]|[12][0-9]|3[01])[-.](0[1-9]|1[012])[-.](19|20)\d\d$/,message:"Ingresa una fecha con formato DD-MM-AAAA."},INT:{regex:/^[\d\,\.]+$/,message:"Ingresa un número entero."},TEXT:{regex:/^.+$/,message:"Ingresa un texto válido."},REQUIRED:{regex:/^$|\s+/,message:"Completa este campo para continuar."}},pt:{EMAIL:{regex:/^([a-zA-Z0-9_\.-]+)@([\da-zA-Z\.-]+)\.([a-zA-Z\.]{2,6})$/,message:"Insira um email válido."},URL:{regex:/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/,message:"Ingrese una URL válida."},DATE:{regex:/^(0[1-9]|[12][0-9]|3[01])[-.](0[1-9]|1[012])[-.](19|20)\d\d$/,message:"Insira uma data com formato DD-MM-AAAA."},INT:{regex:/^[\d\,\.]+$/,message:"Insira um número inteiro."},TEXT:{regex:/^.+$/,message:"Insira um texto válido."},REQUIRED:{regex:/^$|\s+/,message:"Complete este campo para continuar."}},en:{EMAIL:{regex:/^([a-zA-Z0-9_\.-]+)@([\da-zA-Z\.-]+)\.([a-zA-Z\.]{2,6})$/,message:"Insert a valid email address."},URL:{regex:/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/,message:"Insert a valid URL."},DATE:{regex:/^(0[1-9]|[12][0-9]|3[01])[-.](0[1-9]|1[012])[-.](19|20)\d\d$/,message:"Insert a date with format DD-MM-YYYY."},INT:{regex:/^[\d\,\.]+$/,message:"Insert a valid integer."},TEXT:{regex:/^.+$/,message:"Insert a valid text."},REQUIRED:{regex:/^$|\s+/,message:"Complete this field to continue."}}},c=p.es,m={partials:{layout:'<form id="optin-form-{{id}}" class="p-optin p-layout-{{layout}}" action="{{action}}" method="POST" accept-charset="UTF-8" data-ajax="{{ajax}}">{{header}}<div class="p-body">{{titleBlock}}{{textBlock}}{{_redirect}}{{_fields}}<div class="p-interests"><p class="p-interests-text">{{interestsText}}</p>{{_interests}}</div><button class="p-submit" type="submit">{{buttonText}}</button>{{footerBlock}}</div></form>',titleBlock:'<p class="p-title">{{title}}</p>',textBlock:'<p class="p-text">{{text}}</p>',footerBlock:'<p class="p-footer">{{footer}}</p>',header:'<div class="p-header"><div class="p-title">{{title}}</div><div class="p-close" id="p-close">&times;</div></div>',redirect:'<input type="hidden" name="redirect" value="{{redirect}}">',field:'<div class="p-field"><label><span>{{displayName}}</span></label><input type="text" maxlength="100" name="fields[{{id}}]" placeholder="{{placeholder}}" {{required}} data-validate={{format}} {{regex}} {{message}}></div>',fieldSelect:'<div class="p-field"><label><span>{{displayName}}</span></label><select name="fields[{{id}}]" {{required}}><option value="" disabled selected>{{placeholder}}</option>{{fieldOptions}}</select></div>',fieldOption:'<option value="{{option}}">{{option}}</option>',selects:{gender:'<div class="p-field"><label><span>{{displayName}}</span></label><select name="fields[{{id}}]" {{required}} class="p-select"><option value="" disabled selected>{{gender}}</option><option value="M">{{male}}</option><option value="F">{{female}}</option></select></div>',language:'<div class="p-field"><label><span>{{displayName}}</span></label><select name="fields[{{id}}]" {{required}} class="p-select"><option value="" disabled selected>{{language}}</option><option value="es">Espa&ntilde;ol</option><option value="en">English</option><option value="de">Deutsch</option><option value="fr">Français</option><option value="it">Italiano</option><option value="pt">Português</option></select></div>',format:'<div class="p-field"><label><span>{{displayName}}</span></label><div><label><input type="radio" checked="checked" value="HTML" name="fields[{{id}}]"> HTML</label></div><div><label><input type="radio" value="TXT" name="fields[{{id}}]"> TXT</label></div></div>'},interests:'<div class="p-interest"><label><input type="checkbox" name="interests[]" value="{{id}}" {{checked}}>{{displayName}}</label></div>',success:'<div class="p-success">{{message}}</div>',button:'<button id="p-open" class="p-open">{{buttonText}}</button>',error:'<p class="p-error-message">{{error}}</p>',spinner:'<svg class="p-spinner" viewBox="0 0 50 50"><circle cx="25" cy="25" r="20" fill="none" stroke-width="5"></circle></svg>'},styles:{headerBackgroundColor:{selector:".p-optin{{id}} div.p-header",property:"background-color"},headerTextColor:{selector:".p-optin{{id}} div.p-header, div.p-close, .p-optin{{id}} div.p-body p.p-title",property:"color"},buttonBackgroundColor:{selector:".p-optin{{id}} .p-body button, div.p-button button.p-open",property:"background-color"},buttonTextColor:{selector:".p-optin{{id}} .p-body button, div.p-button button.p-open",property:"color"},textColor:{selector:".p-optin{{id}} div.p-body p:not(.p-error-message):not(.p-title), .p-optin{{id}} div.p-body .p-success, .p-optin{{id}} div.p-body label",property:"color"},backgroundColor:{selector:".p-optin{{id}} div.p-body",property:"background-color"},image:{selector:".p-optin{{id}} div.p-col-image",property:"background-image"},imageSize:{selector:".p-optin{{id}} div.p-col-image",property:"background-size"},landingBackground:{selector:"body.p-landing",property:"background"},backgroundImage:{selector:".p-optin{{id}} div.p-body",property:"background-image"},backgroundImageSize:{selector:".p-optin{{id}} div.p-body",property:"background-size"},textAlign:{selector:".p-optin{{id}} .p-body p",property:"text-align"},maxWidth:{selector:"form.p-optin{{id}}",property:"max-width"}}},u={default:m,leftImage:{partials:Object.assign({},m.partials,{layout:'<form id="optin-form-{{id}}" class="p-optin p-layout-{{layout}}" action="{{action}}" method="POST" accept-charset="UTF-8" data-ajax="{{ajax}}">{{header}}<div class="p-body"><div class="p-grid"><div class="p-col p-col-image"></div><div class="p-col p-col-form">{{titleBlock}}{{textBlock}}{{_redirect}}{{_fields}}<div class="p-interests"><p class="p-interests-text">{{interestsText}}</p>{{_interests}}</div><button class="p-submit" type="submit">{{buttonText}}</button>{{footerBlock}}</div></div></form>'}),styles:m.styles},rightImage:{partials:Object.assign({},m.partials,{layout:'<form id="optin-form-{{id}}" class="p-optin p-layout-{{layout}}" action="{{action}}" method="POST" accept-charset="UTF-8" data-ajax="{{ajax}}">{{header}}<div class="p-body"><div class="p-grid"><div class="p-col p-col-form">{{titleBlock}}{{textBlock}}{{_redirect}}{{_fields}}<div class="p-interests"><p class="p-interests-text">{{interestsText}}</p>{{_interests}}</div><button class="p-submit" type="submit">{{buttonText}}</button>{{footerBlock}}</div><div class="p-col p-col-image"></div></div></form>'}),styles:m.styles},inline:{partials:Object.assign({},m.partials,{layout:'<form id="optin-form-{{id}}" class="p-optin p-layout-{{layout}}" action="{{action}}" method="POST" accept-charset="UTF-8" data-ajax="{{ajax}}">{{header}}<div class="p-body">{{titleBlock}}{{textBlock}}<div class="p-inline-fields">{{_redirect}}{{_fields}}<button class="p-submit" type="submit">{{buttonText}}</button></div>{{footerBlock}}</div></form>'}),styles:m.styles},topImage:{partials:Object.assign({},m.partials,{layout:'<form id="optin-form-{{id}}" class="p-optin p-layout-{{layout}}" action="{{action}}" method="POST" accept-charset="UTF-8" data-ajax="{{ajax}}">{{header}}<div class="p-body"><div class="p-grid"><div class="p-col p-col-image"></div><div class="p-col p-col-form">{{titleBlock}}{{textBlock}}{{_redirect}}{{_fields}}<div class="p-interests"><p class="p-interests-text">{{interestsText}}</p>{{_interests}}</div><button class="p-submit" type="submit">{{buttonText}}</button>{{footerBlock}}</div></div></form>'}),styles:m.styles}},g=u.default,f=g.partials,v={4:"gender",5:"language",7:"format"},y={_redirect:"",_fields:"",_interests:""},b={},x=function(e,t){var a,o;for(a in t)t.hasOwnProperty(a)&&(o=new RegExp("{{"+a+"}}","g"),e=e.replace(o,t[a]));return e},h=function(e){var t,a,o,i=0,s=e.target.elements,r=document.getElementsByClassName("p-error-message");for(I=!0;r.length>0;)r[0].parentNode.removeChild(r[0]);for(i=0,t="";t=s[i++];)"input"!==t.localName&&"select"!==t.localName||("EMAIL"===t.getAttribute("data-validate")&&(t.value=t.value.trim()),t.className="",a=t.getAttribute("data-validate")||!1,o=t.getAttribute("data-required")||!1,customRegex=t.getAttribute("data-regex")||!1,customMessage=t.getAttribute("data-message")||!1,o&&""===t.value?(I=!1,t.className="p-error",t.insertAdjacentHTML("afterend",x(f.error,{error:c.REQUIRED.message}))):a&&!customRegex&&""!==t.value?new RegExp(c[a].regex).test(t.value)||(I=!1,t.className="p-error",t.insertAdjacentHTML("afterend",x(f.error,{error:c[a].message}))):customRegex&&""!==t.value&&(new RegExp(customRegex).test(t.value)||(I=!1,t.className="p-error",t.insertAdjacentHTML("afterend",x(f.error,{error:customMessage})))));return I||e.preventDefault(),I},T=function(e){b.body.className=r,b.popup.className="p-layer p-closed"},k=function(e){b.body.className=r+" p-popup-open",b.popup.className="p-layer"},E=function(){var e=new Date,t=location.host;t.startsWith("www")?t=t.replace("www",""):t&&(t="."+t),e.setMilliseconds(e.getMilliseconds()+31536e6),document.cookie="p-optin=1; path=/ ; expires="+e.toUTCString()+" ; domain="+t},A="",I=!0,B="es",M={};try{n.config&&(M=JSON.parse(n.config))}catch(e){console.error("Invalid custom config")}M.layout&&((g=u[M.layout])||(g=u.default)),f=g.partials,n.ajax=!n.redirect.length,n.action="https://pubapi.myperfit.com/v2/optin/tussy/"+l,n.id=l;var L=navigator.language||navigator.userLanguage;if(L){var N=L.substr(0,2);p[N]&&(B=N)}c=p[B];var j=M.styles&&M.styles.titleInBody;n.header=""===n.title||j?"":x(f.header,n),n.titleBlock=""!==n.title&&j?x(f.titleBlock,n):"",n.textBlock=""===n.text?"":x(f.textBlock,n),n.footerBlock=""===n.footer?"":x(f.footerBlock,n),n.layout=M.layout||"default",A+=x(f.layout,n),y._redirect=x(f.redirect,n);var w,$=M.fields||{};for(e=0;e<n.fields.length;e++){(a=n.fields[e]).required=a.required?'data-required="true"':"",a.placeholder="DATE"===a.format?"DD-MM-AAAA":a.displayName;var R=n.fields[e].id.toString();if($[R]&&$[R].validator){var _=$[R].validator;_.regex&&(a.regex='data-regex="'+_.regex+'"'),_.message&&(a.message='data-message="'+_.message+'"')}else a.regex="",a.message="";if(void 0!==v[a.id])a.male=d[B].male,a.female=d[B].female,a.gender=d[B].gender,a.language=d[B].language,o=f.selects[v[a.id]];else if($[R]&&$[R].options){for(a.fieldOptions="",t=0;t<$[R].options.length;t++)a.fieldOptions+=x(f.fieldOption,{option:$[R].options[t]});o=f.fieldSelect}else o=f.field;y._fields+=x(o,a)}for(e=0;e<n.interests.length;e++)(a=n.interests[e]).checked=a.selected?"checked":"",a.displayName=a.displayName.replace(/\[([^\]]+)\]\(([^\)]+)\)/,'<a target="_blank" href="$2">$1</a>'),y._interests+=x(f.interests,a);if(A=x(A,y),b.container=document.getElementById("optin-"+l),b.body=document.getElementsByTagName("body")[0],r=b.body.className,n.type=b.container.getAttribute("data-type")||"inline",b.container.className="p-"+n.type,"inline"===n.type&&(b.container.innerHTML=A,b.form=b.container.childNodes[0]),"popup"===n.type||"button"===n.type){if("popup"===n.type&&(n.mode=b.container.getAttribute("data-mode")||"once"),b.popup=document.createElement("div"),b.popup.innerHTML=A,b.form=b.popup.childNodes[0],b.body.appendChild(b.popup),k(),(w=new RegExp("(?:^|; )"+encodeURIComponent("p-optin")+"=([^;]*)").exec(document.cookie))&&w[1]&&T(),b.close=b.popup.querySelectorAll(".p-close")[0],b.close)b.close.addEventListener?b.close.addEventListener("click",T,!1):b.close.attachEvent&&b.close.attachEvent("onclick",T);else{var C=document.createElement("div");C.className="p-close-layer",C.addEventListener("click",T,!1),b.popup.insertBefore(C,b.popup.firstChild)}"once"===n.mode&&E()}"button"===n.type&&(b.container.innerHTML=x(f.button,n),T(),b.open=document.getElementById("p-open"),b.open.addEventListener?b.open.addEventListener("click",k,!1):b.open.attachEvent&&b.open.attachEvent("onclick",k)),b.form.addEventListener?b.form.addEventListener("submit",h,!1):b.form.attachEvent&&b.form.attachEvent("onsubmit",h);var O,z,D="";if(M.styles)for(var H in M.styles)M.styles.hasOwnProperty(H)&&(D+=(O=H,(z=M.styles[H])&&g.styles[O]?g.styles[O].selector.replace(/{{id}}/g,"#optin-form-"+l)+"{"+g.styles[O].property+":"+z+"}\n":""));M.customCss&&(D+=M.customCss);var U=document.getElementsByTagName("head")[0];if(D){var S=document.createElement("style");S.type="text/css",S.innerHTML=D,U.appendChild(S)}if(M.fonts&&(M.fonts.title&&M.fonts.title.family||M.fonts.text&&M.fonts.text.family)){var P=document.createElement("style");P.rel="stylesheet",P.innerHTML="@import url(https://fonts.googleapis.com/css2?display=swap",M.fonts.text&&M.fonts.text.family&&(P.innerHTML+="&family="+encodeURIComponent(M.fonts.text.family+(M.fonts.text.weight?":wght@"+M.fonts.text.weight:""))),M.fonts.title&&M.fonts.title.family&&(P.innerHTML+="&family="+encodeURIComponent(M.fonts.title.family+(M.fonts.title.weight?":wght@"+M.fonts.title.weight:""))),P.innerHTML+=");\n",M.fonts.text&&M.fonts.text.family&&(P.innerHTML+="#optin-form-ygpmFNI6 {font-family: "+M.fonts.text.family+" !important}\n"),M.fonts.title&&M.fonts.title.family&&(P.innerHTML+="#optin-form-ygpmFNI6.p-optin .p-title {font-family: "+M.fonts.title.family+" !important}\n"),U.insertBefore(P,U.firstChild)}return(window.forceAjax||n.ajax)&&(s=function(){jQuery("#optin-form-"+l).submit(function(e){var t=jQuery(this),a=t.find(".p-col-form").length?t.find(".p-col-form"):t.find(".p-body"),o=t.find(".p-submit");e.preventDefault(),I&&(a.css("minHeight",a[0].clientHeight),o.css("minHeight",o[0].clientHeight),o.css("minWidth",o[0].clientWidth),o.html(g.partials.spinner),o.attr("disbled",!0),t.addClass("p-submitting"),jQuery.ajax({type:"POST",url:t.attr("action"),data:t.serialize(),success:function(e){e.success&&a.html(x(f.success,{message:e.data.userMessage})),E()},error:function(e){e.success?alert(d[B].submitError):alert(e.error.userMessage),location.reload()}}))})},window.jQuery?s():((i=document.createElement("script")).type="text/javascript",i.onreadystatechange=function(){"complete"==this.readyState&&s()},i.onload=s,i.src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js",document.getElementsByTagName("head")[0].appendChild(i))),{open:k,close:T,form:n,config:M}}();

